"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[759],{1759:(Y,c,i)=>{i.r(c),i.d(c,{SettingsModule:()=>J});var n=i(95),u=i(6814),t=i(4769);let d=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-resetpassword"]],decls:22,vars:0,consts:[[1,"res","bg-main-light","w-75","mx-auto","rounded","shadow","p-3"],[1,"h4","text-center"],["novalidate","",1,"gap-3","w-75","mx-auto"],[1,"form-item"],["for","currentPassword"],[1,"position-relative"],["formcontrolname","currentPassword","id","currentPassword","type","password","placeholder","Your Current Password....",1,"form-control"],[1,"form-item","mt-2"],["for","password"],["formcontrolname","password","id","password","type","password","placeholder","Your Password....",1,"form-control"],["for","rePassword"],["formcontrolname","rePassword","id","rePassword","type","Password","placeholder","Confirm Password....",1,"form-control"],["type","submit",1,"mt-3","btn","bg-main","ms-auto"]],template:function(s,r){1&s&&(t.TgZ(0,"section",0)(1,"h1",1),t._uU(2,"Update User Password"),t.qZA(),t.TgZ(3,"form",2)(4,"div",3)(5,"label",4),t._uU(6,"Current Password:"),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"input",6),t.qZA()(),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Password:"),t.qZA(),t.TgZ(12,"div",5),t._UZ(13,"input",9),t.qZA()(),t.TgZ(14,"div",7)(15,"label",10),t._uU(16,"RePassword:"),t.qZA(),t.TgZ(17,"div",5),t._UZ(18,"input",11),t.qZA()(),t.TgZ(19,"button",12)(20,"span"),t._uU(21,"Change"),t.qZA()()()())},dependencies:[n._Y,n.JL],styles:[".res[_ngcontent-%COMP%]{margin-top:4.5rem}"]})}return o})();var l=i(1120),g=i(9862);let f=(()=>{class o{constructor(e){this._HttpClient=e}postforgetpassword(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",{email:e})}VerifyResetCode(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{resetCode:e})}resetpassword(e,s){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",{email:e,newPassword:s})}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(g.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var _=i(9587);function w(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," please fillout this field"),t.qZA())}function h(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," please write correct email"),t.qZA())}function Z(o,a){if(1&o&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userMsg)}}function x(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",1)(1,"h1",2),t._uU(2,"Forgot Password"),t.qZA(),t.TgZ(3,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.forgetpass(r.forgetpassword))}),t.TgZ(4,"div",4)(5,"label"),t._uU(6,"Email:"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,w,2,0,"p",6),t.YNc(9,h,2,0,"p",6),t.qZA(),t.TgZ(10,"button",7),t._uU(11," Next "),t.qZA(),t.YNc(12,Z,2,1,"p",8),t.qZA()()}if(2&o){const e=t.oxw();let s,r;t.xp6(3),t.Q6J("formGroup",e.forgetpassword),t.xp6(5),t.Q6J("ngIf",(null==(s=e.forgetpassword.get("email"))?null:s.getError("required"))&&(null==(s=e.forgetpassword.get("email"))?null:s.touched)),t.xp6(1),t.Q6J("ngIf",null==(r=e.forgetpassword.get("email"))?null:r.getError("email")),t.xp6(3),t.Q6J("ngIf",e.userMsg)}}function C(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," resetCode is required"),t.qZA())}function T(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," must be at 6 chars"),t.qZA())}function v(o,a){if(1&o&&(t.TgZ(0,"p",10),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.userMsg)}}function A(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",1)(1,"h1",2),t._uU(2,"Forgot Password"),t.qZA(),t.TgZ(3,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.newresetcode(r.resetcodeform))}),t.TgZ(4,"div",4)(5,"label"),t._uU(6,"Reset Code:"),t.qZA(),t._UZ(7,"input",11),t.YNc(8,C,2,0,"p",6),t.YNc(9,T,2,0,"p",6),t.qZA(),t.TgZ(10,"button",12),t._uU(11," Confirm "),t.qZA(),t.YNc(12,v,2,1,"p",8),t.qZA()()}if(2&o){const e=t.oxw();let s,r;t.xp6(3),t.Q6J("formGroup",e.resetcodeform),t.xp6(5),t.Q6J("ngIf",(null==(s=e.resetcodeform.get("resetCode"))?null:s.getError("required"))&&(null==(s=e.resetcodeform.get("resetCode"))?null:s.touched)),t.xp6(1),t.Q6J("ngIf",null==(r=e.resetcodeform.get("resetCode"))?null:r.getError("pattern")),t.xp6(3),t.Q6J("ngIf",e.userMsg)}}function q(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," please fillout this field"),t.qZA())}function U(o,a){1&o&&(t.TgZ(0,"p",9),t._uU(1," please write correct email"),t.qZA())}function b(o,a){1&o&&(t.TgZ(0,"p",15),t._uU(1," please fillout this field"),t.qZA())}function F(o,a){1&o&&(t.TgZ(0,"p",15),t._uU(1," password must start with capital letter and between 5 to 16 character"),t.qZA())}function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"section",1)(1,"h1",2),t._uU(2,"Reset Password"),t.qZA(),t.TgZ(3,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.newpassword(r.resetpasswordform))}),t.TgZ(4,"label"),t._uU(5,"Email:"),t.qZA(),t._UZ(6,"input",5),t.YNc(7,q,2,0,"p",6),t.YNc(8,U,2,0,"p",6),t.TgZ(9,"label"),t._uU(10,"Reset Password:"),t.qZA(),t._UZ(11,"input",13),t.YNc(12,b,2,0,"p",14),t.YNc(13,F,2,0,"p",14),t.TgZ(14,"button",12),t._uU(15," Reset Password "),t.qZA()()()}if(2&o){const e=t.oxw();let s,r,p,m;t.xp6(3),t.Q6J("formGroup",e.resetpasswordform),t.xp6(4),t.Q6J("ngIf",(null==(s=e.forgetpassword.get("email"))?null:s.getError("required"))&&(null==(s=e.forgetpassword.get("email"))?null:s.touched)),t.xp6(1),t.Q6J("ngIf",null==(r=e.forgetpassword.get("email"))?null:r.getError("email")),t.xp6(4),t.Q6J("ngIf",(null==(p=e.resetpasswordform.get("newPassword"))?null:p.getError("required"))&&(null==(p=e.resetpasswordform.get("newPassword"))?null:p.touched)),t.xp6(1),t.Q6J("ngIf",null==(m=e.resetpasswordform.get("newPassword"))?null:m.getError("pattern"))}}const I=[{path:"",redirectTo:"forget",pathMatch:"full"},{path:"forget",component:(()=>{class o{constructor(e,s,r){this._SettingsService=e,this._Router=s,this._AuthonService=r,this.userMsg="",this.email="",this.step1=!0,this.step2=!1,this.step3=!1,this.forgetpassword=new n.cw({email:new n.NI(null,[n.kI.required,n.kI.email])}),this.resetcodeform=new n.cw({resetCode:new n.NI(null,[n.kI.required,n.kI.pattern(/^[0-9][0-9]{5}$/)])}),this.resetpasswordform=new n.cw({email:new n.NI(null,[n.kI.required,n.kI.email]),newPassword:new n.NI(null,[n.kI.required,n.kI.pattern(/^[A-Z][a-zA-Z0-9]{5,16}$/)])})}forgetpass(e){e.valid&&(this.email=e.value.email,this._SettingsService.postforgetpassword(e.value.email).subscribe({next:r=>{console.log(r),this.userMsg=r.message,this.step1=!1,this.step2=!0},error:r=>{console.log(r),this.userMsg=r.error.message}}))}newresetcode(e){e.valid&&this._SettingsService.VerifyResetCode(e.value.resetCode).subscribe({next:r=>{console.log(r),this.userMsg=r.status,this.step2=!1,this.step3=!0},error:r=>{console.log(r),this.userMsg=r.error.message}})}newpassword(e){e.valid&&this._SettingsService.resetpassword(e.value.email,e.value.newPassword).subscribe({next:s=>{console.log(s),this._AuthonService.signOut()},error:s=>{console.log(s),this.userMsg=s.error.message}})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(f),t.Y36(l.F0),t.Y36(_.B))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgetpassword"]],decls:3,vars:3,consts:[["class","for bg-main-light rounded p-3 shadow w-50 mx-auto",4,"ngIf"],[1,"for","bg-main-light","rounded","p-3","shadow","w-50","mx-auto"],[1,"text-center","h3"],[1,"gap-3",3,"formGroup","ngSubmit"],[1,"form-item"],["formControlName","email","type","email","placeholder","Your Email...",1,"form-control"],["class","m-1 text-danger",4,"ngIf"],[1,"btn","bg-main","w-100","mt-2","ng-star-inserted"],["class","alert alert-danger w-75 mx-auto p-1 mb-0 mt-2 text-center",4,"ngIf"],[1,"m-1","text-danger"],[1,"alert","alert-danger","w-75","mx-auto","p-1","mb-0","mt-2","text-center"],["type","text","formControlName","resetCode","placeholder","Your Reset Code...",1,"form-control"],[1,"btn","bg-main","mt-2","w-100","ng-star-inserted"],["type","password","formControlName","newPassword","placeholder","New Password...",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(s,r){1&s&&(t.YNc(0,x,13,4,"section",0),t.YNc(1,A,13,4,"section",0),t.YNc(2,P,16,5,"section",0)),2&s&&(t.Q6J("ngIf",r.step1),t.xp6(1),t.Q6J("ngIf",r.step2),t.xp6(1),t.Q6J("ngIf",r.step3))},dependencies:[u.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".for[_ngcontent-%COMP%]{margin-top:7rem}"]})}return o})()},{path:"reset",component:d}];let N=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(I),l.Bz]})}return o})(),J=(()=>{class o{constructor(){}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.ez,N,n.UX]})}return o})()}}]);